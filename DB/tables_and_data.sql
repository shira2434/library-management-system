-- יצירת טבלאות ונתונים לפרויקט ניהול ספרייה

USE LibraryDB
GO

-- מחיקת טבלאות קיימות
DROP TABLE IF EXISTS Books;
DROP TABLE IF EXISTS Statuses;
DROP TABLE IF EXISTS Locations;

-- יצירת טבלאות חדשות עם NVARCHAR לעברית
CREATE TABLE Statuses (
    ID INT PRIMARY KEY,
    Name NVARCHAR(100),
    Description NVARCHAR(999)
);

CREATE TABLE Locations (
    ID INT PRIMARY KEY,
    LocationName NVARCHAR(255),
    Description NTEXT
);

CREATE TABLE Books (
    ID INT PRIMARY KEY,
    Title NVARCHAR(255),
    Author NVARCHAR(255),
    Category NVARCHAR(100),
    Description NVARCHAR(999),
    StatusId INT,
    PublishYear INT,
    AvailableCopies INT,
    LocationId INT,
    CreatedAt DATETIME DEFAULT GETDATE(),
    FOREIGN KEY (LocationId) REFERENCES Locations(ID),
    FOREIGN KEY (StatusId) REFERENCES Statuses(ID)
);

-- הכנסת נתונים עם N לפני הטקסט העברי
INSERT INTO Statuses (ID, Name, Description) VALUES
(1, N'זמין', N'הספר זמין להשאלה'),
(2, N'לא זמין', N'הספר לא זמין כרגע'),
(3, N'ממתין להשאלה', N'הספר ממתין להשאלה');

INSERT INTO Locations (ID, LocationName, Description) VALUES
(1, N'מדף ספרי קודש', N'המדף הראשון בספרייה'),
(2, N'מדף ספרי חינוך', N'המדף השני בספרייה'),
(3, N'מדף ספרי ילדים', N'המדף השלישי'),
(4, N'מדף ספרי חסידות', N'המדף הרביעי'),
(5, N'מדף ספרי קריאה', N'המדף החמישי'),
(6, N'ארכיון', N'ספרים בארכיון');

INSERT INTO Books (ID, Title, Author, Category, Description, StatusId, PublishYear, AvailableCopies, LocationId) VALUES
(1, N'תניא', N'רבי שניאור זלמן', N'ספרי קודש', N'ספר יסוד חסידי, ספר תורת החסידות', 1, 1800, 5, 4),
(2, N'חומש עם תרגום', N'רבי חיים עוזר', N'ספרי קודש', N'חומש עם תרגום ופרשנות', 1, 1940, 10, 1),
(3, N'סידור תפילה', N'רבי דוד כהן', N'ספרי קודש', N'סידור תפילה על פי שיטת החסידות', 1, 1960, 8, 1),
(4, N'השליחות', N'רבי מנחם מנדל', N'ספרי חסידות', N'ספר חסידי עם סיפורי מוסר והדרכה', 2, 1995, 3, 4),
(5, N'הדרך למנוחה', N'רבי יצחק אייזיק', N'ספרי חסידות', N'ספר המדריך למציאת מנוחה רוחנית', 1, 1980, 6, 4),
(6, N'החינוך היהודי', N'רבי יואל', N'ספרי חינוך', N'ספר חינוך על פי דרכי התורה היהודית', 2, 1990, 7, 2),
(7, N'הסיפור של יוסי', N'נחמן קרמר', N'ספרי ילדים', N'סיפור ילדים על התמודדות עם קשיים', 1, 2015, 20, 3),
(8, N'שיעורי תורה לילדים', N'רבי יוסף יצחק', N'ספרי ילדים', N'ספר לימוד תורה לילדים בגילאים צעירים', 1, 2000, 15, 3),
(9, N'הנסיך והנשמה', N'משה אפרים', N'ספרי קריאה', N'סיפור עוסק בתכנים רוחניים ופילוסופיים מתורת ברסלב', 3, 2005, 8, 5),
(10, N'ההצלחה בתפילה', N'רבי חיים', N'ספרי חינוך', N'ספר המסביר את הדרך להצלחה בתפילה', 1, 1990, 12, 2),
(11, N'ספר הילדים המושלם', N'רבקה אלקיים', N'ספרי ילדים', N'ספר לילדים עם סיפורים חינוכיים', 1, 2008, 18, 3),
(12, N'ספר המדרש', N'רבי שמעון', N'ספרי קודש', N'ספר מדרש עתיק מלא בסיפורים וחוכמה יהודית', 2, 1820, 4, 1),
(13, N'חינוך על פי התורה', N'רבי דוד בן חיים', N'ספרי חינוך', N'ספר המדריך להורות נכונה על פי התורה', 3, 2010, 9, 2),
(14, N'ברכות ושיעורים', N'הרב יצחק', N'ספרי קריאה', N'ספר על ברכות ושיעורים בהלכה', 1, 2003, 6, 5),
(15, N'מאבק פנימי', N'יוסי ברוך', N'ספרי קריאה', N'ספר שמסביר על מאבקים פנימיים בחיים הרוחניים', 1, 2012, 5, 5),
(16, N'סיפור חסידי', N'רבקה מלכה', N'ספרי חסידות', N'סיפור חסידי עם מוסר השכל ושיעור רוחני', 1, 1998, 7, 4),
(17, N'מפתח לבריאות רוחנית', N'רבי אברהם', N'ספרי חינוך', N'ספר המסביר כיצד לשמור על בריאות רוחנית בעידן המודרני', 1, 2020, 5, 2),
(18, N'לימוד תורה לילדים', N'חיים חיים', N'ספרי ילדים', N'ספר לימוד שמיועד לילדים בגילאי 6-9', 1, 2007, 15, 3),
(19, N'ההתחלה מחדש', N'רבי נתן', N'ספרי קריאה', N'ספר אישי שמסביר על הדרך להתחיל מחדש על פי תורה', 2, 2018, 10, 5);